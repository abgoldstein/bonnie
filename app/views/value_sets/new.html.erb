<% content_for :head do %>
  <script type="text/javascript">
    $(document).ready(function() {
      value_set_functions = new ValueSetFunctions();
      value_set_functions.bind_add_code();
    });
  </script>
<% end %>

<% content_for :page_content do %>

  <% if @value_set %>
  
    <div class="row">
    <div class="span6 offset1">

      <%= form_for @value_set, :html => {:class=>'form-horizontal'}  do |f| %>
        <fieldset>
          <legend>New Value Set</legend>
            <%= f.label :oid  %>
            <%= f.text_field :oid %>
          
            <%= f.label "Description" %>
            <%= f.text_field :description %>
        
          <fieldset>
            <legend>Code Sets</legend>
            <%# order does not matter here %>
            <p class="help-block">Add multiple code sets</p>
            <div class="control-group">
              <%= f.label :code_sets, :class => "control-label" %>
              <div class="controls row well">
                <div class="span6">
                  <%= f.label :category %>
                  <%= f.text_field :category %>
                </div>
                <div class="span6">
                  <%= f.label :concept, :class => 'input-small' %>
                  <%= f.text_field :concept, :class => 'input-small' %>
                </div>
              
                <div class="row">
                <%= fields_for :code_sets do |code_set_fields| %>         
                <div id="codes" class="control-group">                
                    <%= code_set_fields.label :codes, :class => "control-label" %>
                    <a class="btn btn-primary btn-small">+</a>
                    <div class="controls row span3">
                      <%= code_set_fields.text_field 'codes[0]', :class => 'input-small' %><br>
                      <%# code_set_fields.text_field 'codes[1]', :class => 'input-small' %>
                      <%# button_to "<i class=\"icon-search icon-white\">Add To Cart</i>".html_safe, 
                                '#', 
                                class: "btn btn-success" %>
                    </div>
                </div>     
                <% end %>
                </div>
                
              </div>
            </div>      
          </fieldset><!-- code_sets end -->

        </fieldset><!-- value_set end -->
      
        <div class="form-actions">
          <%= f.submit :class => "btn btn-primary" %>
        </div>
      <% end %><!-- form end -->
    </div>
    </div>
  <% else %>
    Created value set with params:
    <%= debug params %>
  <% end %>

<% end %>